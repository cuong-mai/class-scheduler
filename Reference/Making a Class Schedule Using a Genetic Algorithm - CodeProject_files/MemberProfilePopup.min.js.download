function setPopupHeight(n){var t=$("#MemberProfilePopupDiv"),r=t.height(),i=n.contentWindow.document.body.scrollHeight;n.height=i;t.css({top:t.offset().top+(r-i)})}(function(n){var i=!0,r=!1,u="/members/Flair/",t="/script/Membership/View.aspx";n.fn.MemberProfilePopup=function(t){function s(n){var r=",",t=Math.max(0,n).toFixed(0),u=t.length,i=/^\d{4,}$/.test(t)?u%3:0;return(i?t.slice(0,i)+r:"")+t.slice(i).replace(/(\d{3})(?=\d)/g,"$1"+r)}function h(n,t){var r,u,i;return(n.charAt(n.length-1)!="="&&(n=n+"="),r=t.toLowerCase().indexOf(n),r<0||r+n.length==t.length)?"":(u=t.indexOf("&",r),u<0&&(u=t.length),i=t.substring(r+n.length,u),i=i.replace(/%20/gi," "),i=i.replace(/\+/gi," "),i=i.replace(/%22/gi,""),i.replace(/\"/gi,""))}var e={memberSummariesUrl:"/API/Membership/Summary/",missingMemberImageUrl:"/script/Membership/Images/member_unknown.gif"},f,o;return r&&(e.memberSummariesUrl="/API/Member/Summary/"),t&&n.extend(e,t),n("<div id=\"MemberProfilePopupDiv\" class='raised box'><\/div>").css({display:"none",position:"absolute"}).appendTo("body"),f=n("#MemberProfilePopupDiv"),o={sensitivity:7,interval:250,timeout:250,over:function(){var o,t,c,r,l;$target=n(this);o=$target.attr("href");t=h("mid",o);i?(f.empty(),n("<iFrame src='"+u+t+"?Display=Embedded' frameborder='0' width='300' scrolling='no' height='150' onload='setPopupHeight(this)'><\/iFrame>").appendTo("#MemberProfilePopupDiv"),c=f.height(),f.css({left:Math.min($target.offset().left+20,window.innerWidth-f.width()-25),top:$target.offset().top-(c+16)}).show()):(r=e.memberSummariesUrl,r=r+t,l="{ 'memberId' : "+t+" }",n.ajax({url:r,data:l,type:"POST",dataType:"json",contentType:"application/json; charset=utf-8",success:function(t){var i=t,r;i.ImageUrl&&i.ImageUrl.length!=0||(i.ImageUrl=e.missingMemberImageUrl);f.empty();n("<table class='member-popup'><tr valign='top'><td><img /><\/td><td><div class='name'>"+i.Name+"<\/div><div class='title'>"+i.Title+(i.Title&&i.Company?" at ":"")+i.Company+"<\/div><div class='location'>"+i.Country+"<\/div><div class='rep'>"+s(i.RepPoints)+" points<\/div><\/td><\/tr><\/table>").appendTo("#MemberProfilePopupDiv");n("#MemberProfilePopupDiv img").error(function(){$this=n(this);$this.unbind("error");$this.attr("src",e.missingMemberImageUrl);var t=f.height();f.css({left:$target.offset().left+20,top:$target.offset().top-(t+16)})}).attr("src",i.ImageUrl);r=f.height();f.css({left:$target.offset().left+20,top:$target.offset().top-(r+16)}).show()}}))},out:function(){f.hide()}},this.hoverIntent?this.hoverIntent(o):this.hover(o.over,o.out),this};n(function(){n(".qa-info a[href*='"+t+"']").MemberProfilePopup();n(".qa-list a[href*='"+t+"']").MemberProfilePopup();n(".author a[href*='"+t+"']").MemberProfilePopup()})})(jQuery);